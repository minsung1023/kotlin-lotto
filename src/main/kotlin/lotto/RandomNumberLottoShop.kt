package lotto

import lotto.vo.Money

object RandomNumberLottoShop : LottoShop {
    val LOTTO_PRICE = Money(1000)

    override fun sell(cash: Money, manualPurchaseCommand: ManualPurchaseCommand): Lottos {
        val totalPurchaseLottoCount = cash / LOTTO_PRICE
        val manualLottos = manualPurchaseCommand.lottos
        val remainingUnassignedLottoCount = (totalPurchaseLottoCount - manualLottos.size).toInt()
        require(remainingUnassignedLottoCount >= 0) { "금액이 부족합니다." }

        val autoGeneratedLottos = List((totalPurchaseLottoCount - manualLottos.size).toInt()) {
            Lotto.random()
        }

        return Lottos(
            manualLottos = manualLottos,
            autoGeneratedLottos = autoGeneratedLottos
        )
    }
}
